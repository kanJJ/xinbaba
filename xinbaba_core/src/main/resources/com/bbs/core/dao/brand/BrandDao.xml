<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bbs.core.dao.brand.BrandDao">

    <resultMap id="brand" type="Brand">
        <result column="img_url" property="imgUrl"/>
        <result column="web_site" property="webSite"/>
        <result column="is_display" property="isDisplay"/>
    </resultMap>

    <!-- sql part -->
    <sql id="brandQueryCondition">
        <if test="name != null">
            name LIKE "%"#{name}"%"
        </if>
        <if test="isDisplay != null">
            and is_display = #{isDisplay}
        </if>
    </sql>


    <select id="selectBrandListByQuery" parameterType="BrandQuery" resultMap="brand">
        SELECT * FROM babasport.bbs_brand
        <where>
            <include refid="brandQueryCondition"/>
            <if test="startIndex != null">
                limit #{startIndex}, #{pageSize}
            </if>
        </where>
    </select>

    <select id="selectBrandsCount" parameterType="BrandQuery" resultType="long">
        SELECT COUNT(id) FROM babasport.bbs_brand
        <where>
            <include refid="brandQueryCondition"/>
        </where>
    </select>

    <insert id="insertBrand" parameterType="Brand">
        INSERT INTO
        babasport.bbs_brand(id,name,description,img_url,web_site,sort,is_display)
        values
        (null,#{name},#{description},#{imgUrl},#{webSite},#{sort},#{isDisplay} )
    </insert>

    <delete id="deleteBrand" parameterType="Long[]">
        DELETE FROM babasport.bbs_brand
        WHERE id in
        <foreach collection="array" item="id" open="(" close=")" separator=",">
            #{id}
        </foreach>
    </delete>

    <select id="selectBrandById" parameterType="Long" resultMap="brand">
        select * from babasport.bbs_brand where id = #{id}
    </select>

    <update id="updateBrand" parameterType="Brand">
        UPDATE babasport.bbs_brand SET
        name=#{name},
        description=#{description},
        img_url=#{imgUrl},
        <if test="webSite != null">
            web_site=#{webSite},
        </if>
        sort=#{sort},
        is_display=#{isDisplay}
        where id = #{id}
    </update>

</mapper>        

